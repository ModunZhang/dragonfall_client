<?xml version="1.0" encoding="UTF-8"?>
<project name="quick" default="preprocess">
    
    <target name="cleanAll" description="clean native and assets">
        <echo level="info">Start to clean native and assets</echo>
        <exec executable="sh" failonerror="true">
            <arg value="clean.sh" />
        </exec>
    </target>
    
    <target name="nativeBuild" description="Build native code">
        <echo level="info">Start to build native code ...</echo>
        <exec executable="sh" failonerror="true">
            <arg value="build_native.sh" />
        </exec>
    </target>

 	<target name="run" description="Run app on device">
 		<property name="launch_activity" value="${project.app.main}"/>
 		<echo level="info">Start running app ...</echo>
 		<exec executable="${adb}" failonerror="true">
            <arg line="${adb.device.arg}" />
            <arg value="shell" />
            <arg value="am" />
            <arg value="start" />
            <arg value="-n" />
            <arg value="${project.app.package}/${launch_activity}" />
        </exec>
 	</target>
    <target name="stop" description="Stop running the app of current project">
        <echo level="info">Stop running app ...</echo>
        <exec executable="${adb}" failonerror="true">
            <arg line="${adb.device.arg}" />
            <arg value="shell" />
            <arg value="am" />
            <arg value="force-stop" />
            <arg value="${project.app.package}" />
        </exec>
    </target>
    <target name="replaceLua" description="Replace lua code of current project">
        <echo level="info">Start to push game.zip to device ...</echo>
        <exec executable="${adb}" failonerror="true">
            <arg line="${adb.device.arg}" />
            <arg value="push" />
            <arg value="../../../update_android/scripts/game.zip" />
            <arg value="/mnt/sdcard/batcatstudio/${project.app.identity}/bundle/scripts/" />
        </exec>
    </target>
    <target name="uninstall" description="Uninstall app on device,but do not delete the resources on sdcard">
        <echo level="info">Uninstall app ...</echo>
        <exec executable="${adb}" failonerror="true">
            <arg line="${adb.device.arg}" />
            <arg value="uninstall" />
            <arg value="${project.app.package}" />
        </exec>
    </target>
    <target name="restart" depends="stop, run" description="Restart app"></target>
    <target name="quickd" depends="stop, uninstall,clean,debug,installd" description="quick debug app and install"></target>
    <target name="quickr" depends="stop, uninstall,clean,release,installr" description="quick release app and install"></target>
</project>
